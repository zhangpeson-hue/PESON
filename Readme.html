<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阿中，圣诞大挑战！</title>
    <style>
        :root {
            --red: #d63031;
            --green: #27ae60;
            --gold: #f1c40f;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            background-color: #f0f0f0;
            font-family: 'PingFang SC', sans-serif;
            display: flex; justify-content: center; align-items: center;
        }

        /* 搞怪关卡容器 */
        .stage {
            position: relative;
            z-index: 10;
            text-align: center;
            width: 80%;
            transition: all 0.5s;
        }

        /* 那个乱跑的按钮 */
        #run-btn {
            position: absolute;
            padding: 10px 20px;
            background: var(--red);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            white-space: nowrap;
        }

        /* 贺卡样式 */
        #final-card {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 20px;
            border: 5px solid var(--gold);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .emoji { font-size: 50px; }
        
        /* 满屏爱心动画 */
        .heart {
            position: absolute;
            font-size: 20px;
            color: #ff7675;
            user-select: none;
            pointer-events: none;
            z-index: 5;
        }

        h2 { color: var(--red); }
        .btn-group { margin-top: 30px; }
        .yes-btn { padding: 10px 40px; background: var(--green); color: white; border: none; border-radius: 10px; }
    </style>
</head>
<body>

    <div id="stage1" class="stage">
        <h2 id="stage1-title">阿中，想看圣诞礼物吗？</h2>
        <p>（先点中这个礼物盒再说??）</p>
        <button id="run-btn" onmouseover="runAway()" onclick="nextStage()">?? 点我拆开</button>
    </div>

    <div id="stage2" class="stage" style="display:none;">
        <div class="emoji">??</div>
        <h2>在开启礼物前...</h2>
        <p>请问我是不是宇宙无敌第一帅的男盆友？</p>
        <div class="btn-group">
            <button class="yes-btn" onclick="finalSurprise()">是的，你是！</button>
            <br><br>
            <small style="color: #999" onclick="alert('没有别的选项，别找了')">（没有“不是”这个选项）</small>
        </div>
    </div>

    <div id="stage3" class="stage" style="display:none;">
        <div id="final-card">
            <div class="emoji">??</div>
            <h2>阿中，圣诞快乐！</h2>
            <p id="typing" style="text-align: left; line-height: 1.6; color: #333;"></p>
            <p style="text-align: right; font-weight: bold; color: var(--red);">—— 宇宙无敌大土豆</p>
            <img src="https://api.iconify.design/twemoji:kissing-heart.svg" width="50">
        </div>
    </div>

    <script>
        // 1. 乱跑按钮逻辑
        const runBtn = document.getElementById('run-btn');
        let count = 0;

        function runAway() {
            if (count < 5) { // 让她抓不到5次，第6次让她点到
                const x = Math.random() * (window.innerWidth - 100);
                const y = Math.random() * (window.innerHeight - 50);
                runBtn.style.left = x + 'px';
                runBtn.style.top = y + 'px';
                
                const hints = ["太慢啦！", "再快点？", "抓不到我吧~", "差一点点！", "最后一次！"];
                document.getElementById('stage1-title').innerText = hints[count];
                count++;
            }
        }

        function nextStage() {
            document.getElementById('stage1').style.display = 'none';
            document.getElementById('stage2').style.display = 'block';
            document.body.style.backgroundColor = "#fff5f5";
        }

        // 2. 最终惊喜
        function finalSurprise() {
            document.getElementById('stage2').style.display = 'none';
            document.getElementById('stage3').style.display = 'block';
            document.getElementById('final-card').style.display = 'block';
            
            // 触发爱心雨
            setInterval(createHeart, 300);

            // 打印祝福
            const text = "圣诞快乐乐乐乐乐！！????";
            let i = 0;
            function type() {
                if (i < text.length) {
                    document.getElementById('typing').innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, 80);
                }
            }
            type();
        }

        // 3. 爱心动画
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = '????';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 2 + 3 + 's';
            heart.style.opacity = Math.random();
            document.body.appendChild(heart);
            
            let pos = 0;
            const timer = setInterval(() => {
                pos += 2;
                heart.style.top = (100 - pos) + 'vh';
                if (pos > 120) {
                    clearInterval(timer);
                    heart.remove();
                }
            }, 20);
        }
    </script>
</body>
</html>